(function(e,t,n,r){function o(t,n){defaults={showBlanks:true,errorMessage:"Sorry, that is not a valid date.",selectorClass:"mds-"+e(t).attr("class"),longMonths:true,numYears:10,startYear:(new Date).getFullYear(),breakPoint:568,day:"",month:"",year:"",monthNumber:"",wholeDate:"",days:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsLong:["January","February","March","April","May","June","July","August","September","October","November","December"],years:[],daysSelect:"",monthsSelect:"",yearsSelect:"",color:"red"};this.element=t;this.settings=e.extend({},defaults,n);this._defaults=defaults;this._name=s;this.init()}var s="mobileDateSelection";o.prototype={init:function(){$window=e(t);base=this;console.log(this.settings.showBlanks);if(this.settings.showBlanks){this.settings.years.push("");this.settings.monthsShort.unshift("");this.settings.monthsLong.unshift("");this.settings.days.unshift("")}else{this.settings.years.push("Select");this.settings.monthsShort.unshift("Select");this.settings.monthsLong.unshift("Select");this.settings.days.unshift("Select")}for(i=0;i<this.settings.numYears;i++){this.settings.years.push(this.settings.startYear);this.settings.startYear++}var n=this.settings.longMonths?this.settings.monthsLong:this.settings.monthsShort;daysOptions="",monthsOptions="",yearsOptions="";for(i=0;i<this.settings.days.length;i++){daysOptions+="<option>"+this.settings.days[i]+"</option>"}for(i=0;i<n.length;i++){monthsOptions+="<option value='"+i+"'>"+n[i]+"</option>"}for(i=0;i<this.settings.years.length;i++){yearsOptions+="<option>"+this.settings.years[i]+"</option>"}daysSelect='<label for="day">Date</label><select id="day">'+daysOptions+"</select>";monthsSelect='<label for="month">Month</label><select id="month">'+monthsOptions+"</select>";yearsSelect='<label for="year">Year</label><select id="year">'+yearsOptions+"</select>";$window.resize(function(){base.addToPage(this.element,this.settings)});this.addToPage(this.element,this.settings)},addToPage:function(){var t=e("."+this.settings.selectorClass),n=e("label[for="+e(this.element).attr("id")+"]"),r=this;if($window.width()<this.settings.breakPoint){if(e("."+this.settings.selectorClass).length==0){n.hide();e(this.element).hide().after('<ul class="mds-mobile-date '+this.settings.selectorClass+'"><li>'+daysSelect+"</li><li>"+monthsSelect+"</li><li>"+yearsSelect+"</li></ul>");e("."+this.settings.selectorClass+" select#day").on("change",function(){r.buildDayDate(r.element,r.settings)});e("."+this.settings.selectorClass+" select#month").on("change",function(){r.buildMonthDate(r.element,r.settings)});e("."+this.settings.selectorClass+" select#year").on("change",function(){r.buildYearDate(r.element,r.settings)})}}else{e(this.element).show();n.show();t.remove();e("."+this.settings.selectorClass+"-error").remove()}},buildDayDate:function(){this.settings.day=e("."+this.settings.selectorClass+" select#day").find(":selected").val();this.setDate()},buildMonthDate:function(){this.settings.month=e("."+this.settings.selectorClass+" select#month").find(":selected").text();this.settings.monthNumber=e("."+this.settings.selectorClass+" select#month").find(":selected").val();this.setDate()},buildYearDate:function(){this.settings.year=e("."+this.settings.selectorClass+" select#year").find(":selected").text();this.setDate()},setDate:function(){this.settings.wholeDate=this.settings.day+" "+this.settings.month+" "+this.settings.year;e("."+this.settings.selectorClass+"-error").remove();if(this.settings.day!=""&&this.settings.month!=""&&this.settings.year!=""){if(this.isValidDate(this.settings.day+" "+this.settings.monthNumber+" "+this.settings.year)){e(this.element).val(this.settings.wholeDate)}else{e("."+this.settings.selectorClass).after('<div class="'+this.settings.selectorClass+'-error">'+this.settings.errorMessage+"</div")}}},isValidDate:function(e){var t=e.split(" ");var n=t[2],r=t[1],i=t[0];console.log(n+" "+r+" "+i);var s=[31,28,31,30,31,30,31,31,30,31,30,31];if(!(n%4)&&n%100||!(n%400)){s[1]=29}return i<=s[--r]}};e.fn[s]=function(t){this.each(function(){if(!e.data(this,"plugin_"+s)){e.data(this,"plugin_"+s,new o(this,t))}});return this}})(jQuery,window,document)